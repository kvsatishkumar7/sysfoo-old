name: sysfoo-ci-pipeline
on: push

jobs: 
  build-sysfoo:
     runs-on: ubuntu-latest
  
     steps:
        - name: Code checkout or code clone
          uses: actions/checkout@v5
          with:
             fetch-depth: 0

        - name: Git leaks Secret Scanning
          uses: gitleaks/gitleaks-action@v2
          env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

        - name: Run mvn test
          run: mvn test
        
        - name: Run mvn clean & package
          run: mvn clean package
        
        - name: Run ls command
          run: ls -lrt
        
        - name: Upload artifact
          uses: actions/upload-artifact@v4
          with:
             name: sysfoo
             path: target/sysfoo.war
